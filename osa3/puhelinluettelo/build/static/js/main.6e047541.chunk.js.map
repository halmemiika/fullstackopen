{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","exportedObject","getAll","axios","get","then","response","data","create","newObject","post","deleteEntry","id","delete","update","put","Notification","message","messageClass","className","Filter","handleFilter","onChange","PersonForm","addName","newName","newNumber","nameChange","numChange","onSubmit","value","type","Persons","persons","map","person","name","number","onClick","App","useState","setPersons","setNewName","setnewNumber","showAll","setShowAll","filterRule","setFilter","setMessage","setMessageClass","useEffect","phoneBookService","intialNumbers","namesToShow","filter","toLowerCase","indexOf","event","target","preventDefault","nameObject","find","window","confirm","newPerson","setTimeout","catch","error","alert","concat","personEntry","n","copyData","undefined","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6e047541.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deleteEntry = (id, newObject) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst exportedObject = { getAll, create, deleteEntry, update };\r\n\r\nexport default exportedObject;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport phoneBookService from \"./services/persons\";\r\n\r\nconst Notification = ({ message, messageClass }) => {\r\n  if (message === null) {\r\n    return null;\r\n  } else if (messageClass === \"success\") {\r\n    return <div className=\"success\">{message}</div>;\r\n  } else if (messageClass === \"error\") {\r\n    return <div className=\"error\">{message}</div>;\r\n  }\r\n};\r\n\r\nconst Filter = ({ handleFilter }) => {\r\n  return (\r\n    <>\r\n      filter shown with <input onChange={handleFilter} />\r\n    </>\r\n  );\r\n};\r\n\r\nconst PersonForm = ({ addName, newName, newNumber, nameChange, numChange }) => {\r\n  return (\r\n    <form onSubmit={addName}>\r\n      <div>\r\n        name: <input value={newName} onChange={nameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={numChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst Persons = ({ persons, deleteEntry }) => {\r\n  return (\r\n    <>\r\n      {persons.map((person) => (\r\n        <p key={person.id}>\r\n          {person.name} {person.number}\r\n          <button onClick={() => deleteEntry(person.id)}>delete</button>\r\n        </p>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setnewNumber] = useState(\"\");\r\n  const [showAll, setShowAll] = useState(true);\r\n  const [filterRule, setFilter] = useState(\"\");\r\n  const [message, setMessage] = useState(null);\r\n  const [messageClass, setMessageClass] = useState(\"success\");\r\n\r\n  useEffect(() => {\r\n    phoneBookService\r\n      .getAll()\r\n      .then((intialNumbers) => setPersons(intialNumbers));\r\n  }, []);\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault();\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n    const person = persons.find((person) => person.name === newName);\r\n    if (person && person.number !== newNumber) {\r\n      if (\r\n        window.confirm(\r\n          `${newName} is already added to phonebook, replace the old number with a new one?`\r\n        )\r\n      ) {\r\n        phoneBookService\r\n          .update(person.id, nameObject)\r\n          .then((data) => {\r\n            setPersons(\r\n              persons.map((newPerson) =>\r\n                newPerson.id !== data.id ? newPerson : data\r\n              )\r\n            );\r\n            setMessage(`Changed number of ${person.name} successfully.`);\r\n            setTimeout(() => {\r\n              setMessage(null);\r\n            }, 5000);\r\n            setNewName(\"\");\r\n            setnewNumber(\"\");\r\n          })\r\n          .catch((error) => {\r\n            setMessage(\r\n              `Information of ${person.name} has already been removed from server`\r\n            );\r\n            setMessageClass(\"error\");\r\n            setTimeout(() => {\r\n              setMessage(null);\r\n              setMessageClass(\"success\");\r\n            }, 5000);\r\n          });\r\n      }\r\n    } else if (person && person.number === newNumber) {\r\n      alert(`${person.name} is already added to the phonebook!`);\r\n    } else {\r\n      phoneBookService.create(nameObject).then((data) => {\r\n        setPersons(persons.concat(data));\r\n        setMessage(`Added ${newName}`);\r\n        setTimeout(() => {\r\n          setMessage(null);\r\n        }, 5000);\r\n        setNewName(\"\");\r\n        setnewNumber(\"\");\r\n      });\r\n    }\r\n  };\r\n\r\n  const deleteEntry = (id) => {\r\n    const personEntry = persons.find((n) => n.id === id);\r\n    const copyData = { ...personEntry };\r\n    if (window.confirm(`Delete ${personEntry.name}`)) {\r\n      phoneBookService\r\n        .deleteEntry(id, copyData)\r\n        .then((data) =>\r\n          setPersons(\r\n            persons\r\n              .map((person) => (person.id !== id ? person : data))\r\n              .filter((person) => person.name !== undefined)\r\n          )\r\n        );\r\n      setMessage(`Deleted ${personEntry.name}`);\r\n      setTimeout(() => {\r\n        setMessage(null);\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumChange = (event) => {\r\n    setnewNumber(event.target.value);\r\n  };\r\n\r\n  const handleFilter = (event) => {\r\n    setFilter(event.target.value.toLowerCase());\r\n    setShowAll(!setShowAll);\r\n  };\r\n\r\n  const namesToShow = showAll\r\n    ? persons\r\n    : persons.filter(\r\n        (person) => person.name.toLowerCase().indexOf(filterRule) !== -1\r\n      );\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} messageClass={messageClass} />\r\n      <Filter handleFilter={handleFilter} />\r\n      <h3>Add a new</h3>\r\n      <PersonForm\r\n        addName={addName}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        nameChange={handleNameChange}\r\n        numChange={handleNumChange}\r\n      />\r\n      <h3>Numbers</h3>\r\n      <Persons persons={namesToShow} deleteEntry={deleteEntry} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}