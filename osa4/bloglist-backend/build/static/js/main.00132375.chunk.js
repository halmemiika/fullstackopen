(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{120:function(e,t,n){},121:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(12),s=n.n(i),o=n(19),l=n(9),u=n.n(l),d=n(17),j=n(24),b=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_NOTIFICATION",data:e}),a&&clearTimeout(a),a=setTimeout((function(){n({type:"CLEAR_NOTIFICATION"})}),5e3);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.data;case"CLEAR_NOTIFICATION":return null;default:return e}},h=n(62),m=n(80),O=n(27),f=n.n(O),g="loggedBlogAppUser",x=function(e){return localStorage.setItem(g,JSON.stringify(e))},v=function(){return JSON.parse(localStorage.getItem(g))},y=function(){return localStorage.removeItem(g)},w="/api/blogs",N=function(){return{headers:{Authorization:"bearer ".concat(v().token)}}},k={getAll:function(){return f.a.get(w).then((function(e){return e.data}))},create:function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(w,t,N());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return f.a.put("".concat(w,"/").concat(e),t).then((function(e){return e.data}))},remove:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("".concat(w,"/").concat(t),N());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addComment:function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("".concat(w,"/").concat(t,"/comments"),n);case 2:a=e.sent,console.log(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_BLOGS":return t.data;case"NEW_BLOG":return[].concat(Object(m.a)(e),[t.data]);case"LIKE_BLOG":var n=t.data.id,a=e.find((function(e){return e.id===n})),r=Object(h.a)(Object(h.a)({},a),{},{likes:a.likes+1}),c=e.map((function(e){return e.id!==n?e:r}));return c.sort((function(e,t){return e.likes<t.likes?1:-1}));case"DELETE_BLOG":var i=t.data.id;return k.remove(i),e.filter((function(e){return e.id!==i}));default:return e}},B=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"LOG_IN",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return t.data;case"LOG_OUT":return null;default:return e}},T=function(){return f.a.get("/api/users").then((function(e){return e.data}))},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_USERS":return t.data;default:return e}},S=n(26),A=n(11),E=n(166),_=n(167),D=n(122),G=n(172),U=n(123),W=n(168),F=n(169),R=n(157),q=n(156),J=n(78),H=n.n(J),K=n(171),M=n(2),P=function(){var e=Object(o.c)((function(e){return e.notification}));return e?Object(M.jsx)(K.a,{severity:e.class,children:e.message}):null},V=n(170),z=Object(q.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Q=function(e){var t=e.handleLogin,n=e.handleUsernameChange,a=e.handlePasswordChange,r=e.username,c=e.password,i=z();return Object(M.jsxs)("form",{onSubmit:t,className:i.form,children:[Object(M.jsx)("div",{children:Object(M.jsx)(V.a,{id:"username",value:r,onChange:n,label:"username",variant:"outlined",required:!0,margin:"normal"})}),Object(M.jsx)("div",{children:Object(M.jsx)(V.a,{id:"password",type:"password",value:c,onChange:a,label:"password",variant:"outlined",required:!0,margin:"normal"})}),Object(M.jsx)(R.a,{id:"login-button",type:"submit",variant:"contained",color:"primary",className:i.submit,fullWidth:!0,children:"login"})]})},X=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:e.spacing(4)},title:{marginTop:e.spacing(4),marginBottom:e.spacing(2)}}})),Y=function(e){var t=e.createBlog,n=Object(r.useState)(""),a=Object(j.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)(""),o=Object(j.a)(s,2),l=o[0],u=o[1],d=Object(r.useState)(""),b=Object(j.a)(d,2),p=b[0],h=b[1],m=X();return Object(M.jsx)("form",{onSubmit:function(e){e.preventDefault(),t({title:c,author:l,url:p}),u(""),i(""),h("")},children:Object(M.jsxs)(D.a,{elevation:3,className:m.paper,children:[Object(M.jsx)(U.a,{variant:"h5",className:m.title,children:"Create a new Blog"}),Object(M.jsx)(V.a,{id:"title",value:c,onChange:function(e){i(e.target.value)},label:"title",variant:"outlined",required:!0,margin:"dense",multiline:!0}),Object(M.jsx)(V.a,{id:"author",value:l,onChange:function(e){u(e.target.value)},label:"author",variant:"outlined",required:!0,margin:"dense"}),Object(M.jsx)(V.a,{id:"url",value:p,onChange:function(e){h(e.target.value)},label:"url",variant:"outlined",required:!0,margin:"dense"}),Object(M.jsx)(R.a,{type:"submit",variant:"contained",color:"primary",children:"save"})]})})},Z=c.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),a=Object(j.a)(n,2),c=a[0],i=a[1],s=function(){i(!c)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:s}})),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{style:{display:c?"none":"flex"},children:Object(M.jsx)(R.a,{id:"loginForm-button",onClick:s,variant:"contained",color:"primary",fullWidth:!0,children:e.buttonLabel})}),Object(M.jsxs)("div",{style:{display:c?"flex":"none",flexDirection:"column"},children:[e.children,Object(M.jsx)(R.a,{id:"loginForm-button",onClick:s,variant:"contained",color:"secondary",children:"cancel"})]})]})}));Z.displayName="Togglable";var $=Z,ee=n(158),te=n(159),ne=n(160),ae=n(161),re=n(162),ce=n(163),ie=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(4),marginBottom:e.spacing(4)},title:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:e.spacing(4)},author:{display:"flex",justifyContent:"flex-end"}}})),se=function(){var e=Object(o.c)((function(e){return e.blogs})),t=ie();return Object(M.jsxs)("div",{children:[Object(M.jsx)(U.a,{variant:"h4",className:t.title,children:"Blogs"}),Object(M.jsx)(ee.a,{component:D.a,className:t.paper,elevation:3,children:Object(M.jsxs)(te.a,{stickyHeader:!0,children:[Object(M.jsx)(ne.a,{children:Object(M.jsxs)(ae.a,{children:[Object(M.jsx)(re.a,{children:Object(M.jsx)(U.a,{variant:"h6",children:"Blog Title"})}),Object(M.jsx)(re.a,{className:t.author,children:Object(M.jsx)(U.a,{variant:"h6",children:"Blog Author"})})]})}),Object(M.jsx)(ce.a,{children:e.map((function(e){return Object(M.jsxs)(ae.a,{children:[Object(M.jsx)(re.a,{children:Object(M.jsx)(S.b,{to:"/blogs/".concat(e.id),children:e.title})}),Object(M.jsx)(re.a,{className:t.author,children:e.author})]},e.id)}))})]})})]})},oe=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(4),marginBottom:e.spacing(4)},title:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:e.spacing(4)},amount:{display:"flex",justifyContent:"flex-end"}}})),le=function(){var e=Object(o.c)((function(e){return e.users})),t=oe();return Object(M.jsxs)("div",{children:[Object(M.jsx)(U.a,{variant:"h4",className:t.title,children:"Users"}),Object(M.jsx)(ee.a,{component:D.a,className:t.paper,elevation:3,children:Object(M.jsxs)(te.a,{children:[Object(M.jsx)(ne.a,{children:Object(M.jsxs)(ae.a,{children:[Object(M.jsx)(re.a,{children:Object(M.jsx)(U.a,{variant:"h6",children:"User"})}),Object(M.jsx)(re.a,{className:t.amount,children:Object(M.jsx)(U.a,{variant:"h6",children:"Blogs created"})})]})}),Object(M.jsx)(ce.a,{children:e.map((function(e){return Object(M.jsxs)(ae.a,{user:e,children:[Object(M.jsx)(re.a,{children:Object(M.jsx)(S.b,{to:"/users/".concat(e.id),children:e.name?e.name:e.username})}),Object(M.jsx)(re.a,{className:t.amount,children:e.blogs.length?e.blogs.length:0})]},e.id)}))})]})})]})},ue=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(4),marginBottom:e.spacing(4)},title:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:e.spacing(4)},subtitle:{display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold"},centerText:{textAlign:"center"},link:{textDecoration:"none"},noBlogs:{textAlign:"center",padding:e.spacing(2,0)}}})),de=function(){var e=Object(A.g)(),t=Object(o.c)((function(e){return e.users})).find((function(t){return t.id===e.id})),n=ue();return t?Object(M.jsxs)("div",{children:[Object(M.jsx)(U.a,{variant:"h4",className:n.title,children:t.name}),Object(M.jsx)(ee.a,{component:D.a,className:n.paper,elevation:3,children:Object(M.jsxs)(te.a,{children:[Object(M.jsx)(ne.a,{children:Object(M.jsx)(ae.a,{children:Object(M.jsx)(re.a,{children:Object(M.jsx)(U.a,{variant:"h5",className:n.subtitle,children:"Added blogs"})})})}),t.blogs.length?Object(M.jsx)(ce.a,{children:t.blogs.map((function(e){return Object(M.jsx)(ae.a,{children:Object(M.jsx)(re.a,{className:n.centerText,children:Object(M.jsx)(S.b,{to:"/blogs/".concat(e.id),className:n.link,children:e.title})})},e.id)}))}):Object(M.jsx)(U.a,{variant:"body1",className:n.noBlogs,gutterBottom:!0,children:"No added blogs yet"})]})})]}):null},je=n(164),be=n(165),pe=Object(q.a)((function(e){return{card:{marginTop:e.spacing(8)},title:{textAlign:"center"},cardDetails:{padding:e.spacing(1)},likeButton:{marginLeft:e.spacing(1)},form:{display:"flex",alignItems:"center",justifyContent:"center",gap:"30px"}}})),he=function(){var e=Object(A.g)(),t=Object(o.c)((function(e){return e.blogs})).find((function(t){return t.id===e.id})),n=Object(o.c)((function(e){return e.user})),a=Object(o.b)(),c=Object(A.f)(),i=Object(r.useState)(""),s=Object(j.a)(i,2),l=s[0],u=s[1],d=pe();if(!t)return null;return Object(M.jsxs)(je.a,{container:!0,className:d.card,spacing:4,children:[Object(M.jsxs)(je.a,{item:!0,component:D.a,xs:12,sm:6,elevation:3,children:[Object(M.jsx)(U.a,{className:d.title,variant:"h4",children:t.title}),Object(M.jsxs)(U.a,{className:d.title,variant:"h5",children:["by ",t.author]}),Object(M.jsxs)(je.a,{container:!0,children:[Object(M.jsxs)(je.a,{container:!0,direction:"column",xs:6,className:d.cardDetails,children:[Object(M.jsx)(je.a,{item:!0,children:Object(M.jsx)(be.a,{href:t.url,component:U.a,variant:"body1",children:t.url})}),Object(M.jsx)(je.a,{item:!0,children:Object(M.jsxs)(U.a,{variant:"body1",children:[t.likes," likes",Object(M.jsx)(R.a,{onClick:function(){return a({type:"LIKE_BLOG",data:{id:t.id}})},variant:"contained",color:"primary",className:d.likeButton,children:"like"})]})})]}),Object(M.jsxs)(je.a,{container:!0,direction:"column",xs:6,alignItems:"flex-end",className:d.cardDetails,children:[Object(M.jsx)(je.a,{item:!0,children:Object(M.jsxs)(U.a,{variant:"body1",children:["Added by"," ",n.id===t.user.id?"me":t.user.name]})}),Object(M.jsx)(je.a,{item:!0,children:n.id===t.user.id?Object(M.jsx)(R.a,{onClick:function(){window.confirm("Remove blog ".concat(t.title," by ").concat(t.author))&&(a({type:"DELETE_BLOG",data:{id:t.id}}),a(b({message:"Blog ".concat(t.title," by ").concat(t.author," deleted"),class:"success"})),c.push("/"))},variant:"contained",color:"secondary",children:"delete"}):null})]})]})]}),Object(M.jsxs)(je.a,{item:!0,component:D.a,xs:12,sm:6,children:[Object(M.jsx)(U.a,{variant:"h4",className:d.title,children:"Comments"}),Object(M.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={comments:l};k.addComment(t.id,n),u("")},className:d.form,children:[Object(M.jsx)(V.a,{value:l,onChange:function(e){return u(e.target.value)},label:"Comment",variant:"outlined",margin:"normal",multiline:!0}),Object(M.jsx)(R.a,{type:"submit",variant:"contained",color:"primary",children:"add comment"})]}),t.comments.length?Object(M.jsx)("ul",{children:t.comments.map((function(e){return e?Object(M.jsx)(U.a,{component:"li",variant:"subtitle1",children:e},Math.floor(1e4*Math.random())):null}))}):null]})]})},me={login:function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Oe=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:e.spacing(4)},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},toolbar:{display:"flex",justifyContent:"space-between"},title:{paddingLeft:"80px"},createBlog:{marginTop:e.spacing(0)}}})),fe=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(j.a)(c,2),s=i[0],l=i[1],p=Object(r.useRef)(),h=Object(o.b)(),m=Object(o.c)((function(e){return e.user})),O=Oe();Object(r.useEffect)((function(){h(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getAll();case 2:n=e.sent,a=n.sort((function(e,t){return e.likes<t.likes?1:-1})),t({type:"ALL_BLOGS",data:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:n=e.sent,t({type:"ALL_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[h]),Object(r.useEffect)((function(){var e=v();h(B(e))}),[]);var f=function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,me.login({username:n,password:s});case 4:r=e.sent,h(B(r)),x(r),h(b({message:"Welcome back ".concat(r.name),class:"success"})),a(""),l(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),h(b({message:"wrong username or password",class:"error"}));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t;p.current.toggleVisibility(),h((t=e,function(){var e=Object(d.a)(u.a.mark((function e(n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.create(t);case 2:a=e.sent,n({type:"NEW_BLOG",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),h(b({message:"a new blog ".concat(e.title," by ").concat(e.author," added"),class:"success"}))};return m?Object(M.jsxs)(E.a,{children:[Object(M.jsx)(_.a,{}),Object(M.jsxs)(S.a,{children:[Object(M.jsx)(W.a,{position:"static",children:Object(M.jsxs)(F.a,{className:O.toolbar,children:[Object(M.jsxs)("div",{children:[Object(M.jsx)(R.a,{color:"inherit",component:S.b,to:"/",children:"Blogs"}),Object(M.jsx)(R.a,{color:"inherit",component:S.b,to:"/users",children:"users"})]}),Object(M.jsx)(U.a,{variant:"h4",className:O.title,children:"Blog App"}),Object(M.jsxs)("div",{children:[m.name," logged in",Object(M.jsx)(R.a,{onClick:function(){h(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOG_OUT"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y()},color:"secondary",children:"logout"})]})]})}),Object(M.jsx)(P,{}),Object(M.jsxs)(A.c,{children:[Object(M.jsx)(A.a,{path:"/blogs/:id",children:Object(M.jsx)(he,{})}),Object(M.jsx)(A.a,{path:"/users/:id",children:Object(M.jsx)(de,{})}),Object(M.jsx)(A.a,{path:"/users",children:Object(M.jsx)(le,{})}),Object(M.jsxs)(A.a,{path:"/",children:[Object(M.jsx)("div",{className:O.createBlog,children:Object(M.jsx)(E.a,{maxWidth:"xs",children:Object(M.jsx)($,{buttonLabel:"create new blog",ref:p,children:Object(M.jsx)(Y,{createBlog:g})})})}),Object(M.jsx)(se,{})]})]})]})]}):Object(M.jsxs)(E.a,{maxWidth:"xs",children:[Object(M.jsx)(_.a,{}),Object(M.jsxs)(D.a,{className:O.paper,elevation:3,children:[Object(M.jsx)(G.a,{className:O.avatar,children:Object(M.jsx)(H.a,{})}),Object(M.jsx)(U.a,{variant:"h5",children:"log in to application"}),Object(M.jsx)(P,{}),Object(M.jsx)("div",{children:Object(M.jsx)($,{buttonLabel:"log in",children:Object(M.jsx)(Q,{username:n,password:s,handleUsernameChange:function(e){var t=e.target;return a(t.value)},handlePasswordChange:function(e){var t=e.target;return l(t.value)},handleLogin:f})})})]})]})},ge=(n(120),n(57)),xe=n(79),ve=Object(ge.b)({blogs:C,notification:p,user:L,users:I}),ye=Object(ge.c)(ve,Object(ge.a)(xe.a));s.a.render(Object(M.jsx)(o.a,{store:ye,children:Object(M.jsx)(fe,{})}),document.getElementById("root"))}},[[121,1,2]]]);
//# sourceMappingURL=main.00132375.chunk.js.map